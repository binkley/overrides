<eg-tag>
    <p id="graph">Hello, world!</p>
    <ul>
        <li each={ examples }>
            { name } ({
            typeof(exampleId) === 'undefined' || null === exampleId
            ? '*' : exampleId
            })
        </li>
    </ul>
    <form onsubmit={ addExample }>
        <h2>Create an example</h2>
        <p>Examples are complete, unique entries in their "direct" form</p>
        <fieldset>
            <legend>Create an example</legend>
            <label>Name:
                <input type="text" id="addExampleName" name="name" ref="name"
                        onkeyup={ editAddExampleName } required/>
            </label>
            <button disabled={ !addExampleName }>Create</button>
        </fieldset>
    </form>
    <form onsubmit={ addOverride }>
        <h2>Create an override</h2>
        <p>Overrides temporarily an existing example</p>
        <fieldset>
            <legend>Create an override</legend>
            <label>Example ID:
                <input type="number" id="addOverrideExampleId" name="name"
                        ref="exampleId" required/>
            </label>
            <br>
            <label>Name:
                <input type="text" id="addOverrideName" name="exampleId"
                        ref="name" required/>
            </label>
            <button>Create</button>
        </fieldset>
    </form>
    <form onsubmit={ delOverride }>
        <h2>Undo an override</h2>
        <p>Undoes the temporarily override of an existing example</p>
        <fieldset>
            <legend>Undo an override</legend>
            <label>Example ID:
                <input type="number" id="delOverrideExampleId" name="name"
                        ref="exampleId" required/>
            </label>
            <button>Undo</button>
        </fieldset>
    </form>
    <script>
      var self = this;
      self.examples = [{name: 'If you see this'}, {name: 'REST is broken'}];

      updateItems()
      {
        fetchival('/examples')
          .get()
          .then(function (json) {
            self.examples = json._embedded.examples;
            self.update();
          });
      }

      editAddExampleName(e)
      {
        console.log(e);
        console.log(e.target);
        console.log(e.target.value);
        self.addExampleName = e.target.value;
      }

      addExample(e)
      {
        console.log(e);
        console.log(e.type);
        console.log(e.target);
        console.log(e.refs);
        console.log(e.refs.name);
        fetchival('/p_Examples')
          .post({
            name: this.refs.name.value
          })
          .then(function () {
            self.updateItems();
          });
        e.preventDefault();
        return false;
      }

      addOverride(e)
      {
        console.log(e);
        e.preventDefault();
      }

      delOverride(e)
      {
        console.log(e);
        e.preventDefault();
      }

      this.on('mount', function () {
        self.updateItems();
      });
    </script>
</eg-tag>
